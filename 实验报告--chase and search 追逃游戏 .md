![image-20241121181213352](C:\Users\m1856\AppData\Roaming\Typora\typora-user-images\image-20241121181213352.png)

# **实验报告**--chase and search 追逃游戏 

学号：  202211998132

姓名：   刘畅、景天骄

学院：  人工智能学院  

专业：  人工智能    

日期：  2024.11.30

### 一、实验内容

本次实验为大作业项目

##### chase and search 追逃游戏

我们意图实现一个追逃游戏，从无到有的实现所有的追逃游戏功能，简易来讲，就是作为玩家从AI控制的怪物手中逃脱，在逃亡过程中可以通过捡拾金币道具获得一些技能，当最终人类玩家找到隐藏的杀死怪物的方式游戏胜利，随着时间增大，游戏难度也会随之提升，须知：整个场景的各种基础素材全部来自于unity自带assets库文件，场景为手动搭建，所有除animation control逻辑脚本为独立书写。

### 二、chase and search实验细节展示

##### （1）场景搭建：

本实验选取unity assets仓库中的大量房屋、树木、马路、灯等模型拼接而成，并且设置了多个点源光照，即使是天黑也可以实现灯火通明，模块拼接阶段操作技能性较强，经过二人努力，搭建成功的游戏场景如下：

**白天城市俯视图效果：**

<img src="C:\Users\m1856\Desktop\pic\image-20241121182410048.png" alt="image-20241121182410048" style="zoom: 80%;" />

**黑夜城市俯视图：**

<img src="C:\Users\m1856\Desktop\pic\image-20241121183157957.png" alt="image-20241121183157957" style="zoom:80%;" />

**细节展示：**

<img src="C:\Users\m1856\Desktop\pic\image-20241121183245542.png" alt="image-20241121183245542" style="zoom:80%;" />

<img src="C:\Users\m1856\Desktop\pic\image-20241121183414558.png" alt="image-20241121183414558" style="zoom:80%;" />

<img src="C:\Users\m1856\Desktop\pic\image-20241128084358815.png" alt="image-20241128084358815" style="zoom:80%;" />

##### （2）skybox切换

我们对unity assets里提供的图片生成了大量闭合天空材质球，并添加到主世界的render逻辑中，书写了控制脚本每隔15秒切换天空，形成了日夜交替的感觉效果：

**材质文件分日期举例：**

<img src="C:\Users\m1856\Desktop\pic\image-20241121183759827.png" alt="image-20241121183759827" style="zoom:80%;" />

**挂载观察：**

<img src="C:\Users\m1856\Desktop\pic\image-20241121183921213.png" alt="image-20241121183921213" style="zoom:80%;" />

**切换demo将在最终的演示文件或者实现的执行中观察到**

##### **（3）主人物（由您的电脑端键盘操控）动画逻辑的添加、制作和控制**

对于追逃游戏，其重要核心在于控制与协调，我们采用的人物模型形象可爱，同时我们手动制作了大量动画，可以实现人物跑，跳，走等，加之控制脚本，我们可以实现人物的动作实现主人公，也就是即将来玩本游戏的你，体会到穿梭在城市场景中的交互感。以下是我们采取的主人公的形象与运动情况（在demo scene中体现的，实际情况的操作详见下述demo里有文字提示），我们同时留存了在游戏中的”皮肤“设定，可以添加一些装扮，在游戏中初始不会带有装扮属性：

<video src="C:\Users\m1856\Desktop\pic\bighomework1 - DemoScene - Windows, Mac, Linux - Unity 2022.3.42f1c1_ _DX11_ 2024-11-28 09-09-57.mp4"></video>

##### （4）音乐背景播放器

我们为了使最终的游戏效果获得绝佳体验，我们使用了audioplayer，添加了21音乐循环播放，采用的音频是unity assets中的季节循环音乐，与场景、光源等相互匹配。

<img src="C:\Users\m1856\Desktop\pic\8a2fab392056f01c952d505840c758c.png" alt="8a2fab392056f01c952d505840c758c" style="zoom:80%;" />

##### **（5）敌人、抓捕者（电脑端）动画逻辑的添加、制作和控制**

针对这么可爱的主人公，我们选取了很多小怪作为追捕者，为避免一种怪物的单调性，我们选取了两种小怪，分别是小幽灵和小木乃伊，如下图展示，同时我们也制作了相对应的animation。虽然动画条件较少，但我们设计前后移动，包括木乃伊的跳跃前进，都使用脚本在最终逻辑中有所实现。

![image-20241128093238570](C:\Users\m1856\Desktop\pic\image-20241128093238570.png)

<img src="C:\Users\m1856\Desktop\pic\image-20241128093311000.png" alt="image-20241128093311000" style="zoom: 50%;" />

##### （6）金币物品

除此之外，为了配合下面将要介绍的游戏交互逻辑，我们还使用了好看的金币，选取的是海盗币模型，用以在追逃过程中给您补血、加速、甩开敌人等等，如图是我们的海盗币
![image-20241128144728170](C:\Users\m1856\Desktop\pic\image-20241128144728170.png)

##### **（7）交互逻辑**

**有了场景，人物，音效，我们如下介绍我们的交互逻辑：**

您作为主人公，在被怪物触碰到时，会被扣除5滴血，你的初始血量为100滴，血条会显示在你的正上方，同时在扣血时我们加入了扣血的音效，初始的怪物有20只，其速度分为不同等级，其中最快速度跟你一致，均为5f/s，他们出现在这个城市的设定好的种种角落，并通过AI寻路根据最短路找到你，但你并不是一无所有，你可以找寻城市中掉落的金币，用以找到制胜关键道具，仅有的一种海盗币，找到它你可以直接具备接触杀死所有怪物的功能，那时候你可以直接胜利。当然，当你找到其他种类的海盗币时，你可以触发回血、加速、护盾等特殊功效，具体的交互逻辑在本项目的诸多脚本中都有体现的到，这里就不一一赘述，欢迎收看demo直观体现我们的工作。

**以下是一些控制代码的脚本的部分，（所有的脚本包括小怪的动作，人物的前进后退，跳跃【在这一点上我们可以选择模式为tank或者global，手动切换即可，便可以切换运动逻辑在全局还是在人物坐标系下】，金币逻辑，回血逻辑，加速逻辑，游戏结束触发逻辑，失败触发逻辑，视角切换逻辑，音频播放逻辑，天空盒切换逻辑，照明逻辑以及一些细节的处理脚本等等，每个脚本都有添加注释】，在以下，仅放置一部分：**

###### （1）与小怪碰撞后扣血/弹飞/惨叫逻辑：

![05ca977ad7d126a4e6780f9e0f23079](C:\Users\m1856\Desktop\pic\05ca977ad7d126a4e6780f9e0f23079.png)

###### **（2）与boss碰撞后扣血/弹飞/惨叫逻辑（扣血变多，弹飞变多）（部分，详细见脚本）**：

![d1f1e8d2a14aafcf0d64e2eb6ab02fe](C:\Users\m1856\Desktop\pic\d1f1e8d2a14aafcf0d64e2eb6ab02fe.png)

###### （3）与血包（甜甜圈）碰撞后回血逻辑：

![8ef67566b1d4bf927ffd15beee93657](C:\Users\m1856\Desktop\pic\8ef67566b1d4bf927ffd15beee93657.png)

###### （4）与加速包（银海盗币）碰撞后加速逻辑：

![aec5d9ac49dfaaaf7d061a9affd4fd9](C:\Users\m1856\Desktop\pic\aec5d9ac49dfaaaf7d061a9affd4fd9.png)

**（5）与反杀包（金海盗比）碰撞后可以反杀小怪逻辑，boss降级包（铜海盗币）碰撞后削弱boss为小怪逻辑**：

![abdb99fa88a7dd07c824ecb858ab354](C:\Users\m1856\Desktop\pic\abdb99fa88a7dd07c824ecb858ab354.png)

###### （6）具体改变tag实现：

![6df62f51beecadb4a8e2e119bb4deb4](C:\Users\m1856\Desktop\pic\6df62f51beecadb4a8e2e119bb4deb4.png)

###### （7）高处掉落扣血逻辑：

![16d1f43bc44102c2862d52420e86351](C:\Users\m1856\Desktop\pic\16d1f43bc44102c2862d52420e86351.png)

###### （8）更新血条逻辑：

![3e623e7c160ab84c5760d62e1a3cbb1](C:\Users\m1856\Desktop\pic\3e623e7c160ab84c5760d62e1a3cbb1.png)

![ddf1303754bc99e4071497534fd992a](C:\Users\m1856\Desktop\pic\ddf1303754bc99e4071497534fd992a.png)

###### （9）处理人物的前进、后退、转向逻辑，同时更新对应的动画状态（部分，详细见脚本）：

![b3641e9e93319364296a8f35b2b28e2](C:\Users\m1856\Desktop\pic\b3641e9e93319364296a8f35b2b28e2.png)

###### （10）后视照相机实现逻辑：

![50b741da4972d5acf889e6e3e08020a](C:\Users\m1856\Desktop\pic\50b741da4972d5acf889e6e3e08020a.png)

###### （11）更改天空逻辑：

![07d1f1b53444f2749d79c5ab50e3545](C:\Users\m1856\Desktop\pic\07d1f1b53444f2749d79c5ab50e3545.png)

**结构总览：**

![519db357cc0bc302b9bc17fe164e7c9](C:\Users\m1856\Desktop\pic\519db357cc0bc302b9bc17fe164e7c9.png)

![b9e0e00947ef8093863d3df83fa6da6](C:\Users\m1856\Desktop\pic\b9e0e00947ef8093863d3df83fa6da6.png)

![114f28730c1c327a78d0513f9eefa1b](C:\Users\m1856\Desktop\pic\114f28730c1c327a78d0513f9eefa1b.png)

![c2765e64fde4e1e4ce8a3e311d563f9](C:\Users\m1856\Desktop\pic\c2765e64fde4e1e4ce8a3e311d563f9.png)

![969d0f4c5fca710350048eb9bddd723](C:\Users\m1856\Desktop\pic\969d0f4c5fca710350048eb9bddd723.png)

...

### 三、展示项目，demo

我们的项目分为直接运行版和原始版，直接运行版是unity导出的直接使用的exe执行文件，可以进行大屏的游戏体验，原始版需要您匹配好版本即可在city的scene找到场景后开始执行。我们的项目文档同时开源在giyhub,使用运行文件以云盘链接形式展现在网页中（不放代码，仅可执行）。



